<!DOCTYPE html>
<html>
    <head>
        <title>D3 - Data Driven Drivel</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
        <link rel="stylesheet" type="text/css" href="./styles.css">
    </head>
    <body>
        <div id="chartArea"></div>
        <script type="text/javascript">
            var dataset = _.map(_.range(35), i => {
                return {
                    x: Math.random() * 100,
                    y: Math.random() * 100,
                    r: Math.random() * 30
                }
            });

            var colorGenerator = () => Math.round(Math.random() * 255);

            var margin = {top: 15, right: 15, bottom: 35, left: 50};
            var w = 400 - margin.left - margin.right,
                h = 300 - margin.top - margin.bottom;

            var svg = d3.select('#chartArea').append('svg')
                .attr('width', w + margin.left + margin.right)
                .attr('height', h + margin.top + margin.bottom)
                .style('border', '2px dashed lightgrey')
                .append('g')
                .attr('transform', `translate(${margin.left}, ${margin.top})`)

            var xScale = d3.scale.linear()
                .domain([0, 100])
                .range([w, 0]);

            var yScale = d3.scale.linear()
                .domain([0, d3.max(dataset, d => d.y)] /* * 1.1*/) //Setting this to slightly more than the dataset (by using the 1.1 multiplier) gives us a little bit of space between the highest bar and the top of the "chart".
                .range([h, 0])

            svg.selectAll('circle')
                .data(dataset)
                .enter()
                .append('circle')
                .attr('class', 'bubble')
                .attr('cx', d => xScale(d.x))
                .attr('cy', d => yScale(d.y))
                .attr('r', d => d.r)
                .attr('fill', `rgb(${colorGenerator()}, ${colorGenerator()}, ${colorGenerator()})`)
                .attr('fill-opacity', 0.4)
        </script>
    </body>
</html>